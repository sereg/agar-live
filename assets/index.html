<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>go-agario</title>
    <meta name="description"
        content="" />
    <meta name="theme-color" content="#000000" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <style>
        body {
            height: 100%;
            width: 100%;
            padding: 0;
            margin: 0;
            background-color: #000000;
            color: #FFFFFF;
            font-family: Arial, Helvetica, sans-serif
        }
        .canvas{
            position: absolute;
        }
        .canvas.first{
            z-index: 1;
        }
        .canvas.second{

        }
        .hidden {
            display: none;
        }
    </style>
    <!--
    Add the following polyfill for Microsoft Edge 17/18 support:
    <script src="https://cdn.jsdelivr.net/npm/text-encoding@0.7.0/lib/encoding.min.js"></script>
    (see https://caniuse.com/#feat=textencoder)
    -->
    <script type="text/javascript" src="wasm_exec.js"></script>
    <script type="text/javascript">
        // setInterval(() => {
        //     Cycle()
        // }, 1000 / 60)
        // setInterval(() => {
        //     Cycle()
        // }, 1000)
        // requestAnimationFrame(drawField());
        const init = async function () {
            const go = new Go();
            let result = await WebAssembly.instantiateStreaming(fetch("lib.wasm"), go.importObject);
            go.run(result.instance);
        }
        init().then(() => {
            // window.requestAnimFrame = function(){
                // console.log(Cycle())
            // }
        })
        // if (!WebAssembly.instantiateStreaming) { // polyfill
        //     WebAssembly.instantiateStreaming = async (resp, importObject) => {
        //         const source = await (await resp).arrayBuffer();
        //         return await WebAssembly.instantiate(source, importObject);
        //     };
        // }
        // const go = new Go();
        // let mod, inst;
        // WebAssembly.instantiateStreaming(fetch("lib.wasm"), go.importObject).then((result) => {
        //     mod = result.module;
        //     inst = result.instance;
        //     document.getElementById("runButton").disabled = false;
        // }).catch((err) => {
        //     console.error(err);
        // });
        // async function run() {
        //     console.clear();
        //     await go.run(inst);
        //     inst = await WebAssembly.instantiate(mod, go.importObject); // reset instance
        // }
    </script>
</head>

<body>
</body>

</html>